<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Categories</title>
    <meta name="description" content="A clean, responsive categories page built with only HTML, CSS, and vanilla JS." />
    <link rel="icon" type="image/x-icon" href="../../assets/logo/logo-w-a.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../stylesheets/catalog.css">
</head>

<body>

    <%- include('../components/navbar') %>
        <!-- Page Head -->
        <section class="pagehead">
            <div class="container">
                <h1 class="page-title">Browse Categories</h1>
                <p class="page-subtitle">Explore topics across development, design, business, and more. Use the search
                    and filters to quickly find what youâ€™re into.</p>

                <!-- Controls -->
                <div class="controls">
                    <div class="search">
                        <span class="icon" aria-hidden="true">
                            <svg class="i20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 21l-4.3-4.3" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                                <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" />
                            </svg>
                        </span>
                        <input id="searchInput" type="search" placeholder="Search categories..."
                            aria-label="Search categories" />
                    </div>
                    <div class="sort" role="group" aria-label="Sort categories">
                        <svg class="i20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                            aria-hidden="true">
                            <path d="M3 6h18M6 12h12M9 18h6" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                        <label for="sortSelect" class="visually-hidden">Sort</label>
                        <select id="sortSelect">
                            <option class="option" value="popular">Most Popular</option>
                            <option class="option" value="name">Name (Aâ†’Z)</option>
                            <option class="option" value="rating">Rating Count</option>
                        </select>
                    </div>
                </div>

                <!-- Chips -->
                <div class="chips" id="chips"></div>
            </div>
        </section>

        <!-- Grid -->
        <main class="container">
            <div class="grid" id="grid"></div>
            <div class="pagination" id="pagination" aria-label="Pagination"></div>
        </main>
        <%- include('../components/footer') %>

            <script>
                // ======= Demo Dataset =======
                const CATEGORIES = [
                    // ðŸ”¹ CSE
                    { id: 1, name: 'Web Development', url: '/full-stack-web-development', color: '#6ea8fe', desc: 'Learn HTML, CSS, JavaScript, React, and backend frameworks to build dynamic and responsive web applications.', rating: 4.7, tag: 'CSE' },
                    { id: 2, name: 'Machine Learning', url: '/machine-learning', color: '#3ddc97', desc: 'Master supervised and unsupervised learning using Python, scikit-learn, and data-driven techniques.', rating: 4.6, tag: 'CSE' },
                    { id: 3, name: 'Artificial Intelligence', url: '/artificial-intelligence', color: '#ffd166', desc: 'Understand AI concepts including neural networks, deep learning, NLP, and intelligent automation.', rating: 4.3, tag: 'CSE' },
                    { id: 4, name: 'Data Science', url: '/data-science', color: '#ff6b6b', desc: 'Learn data analysis, SQL, data visualization, and predictive modeling using Python and Power BI.', rating: 4.5, tag: 'CSE' },
                    { id: 5, name: 'Cybersecurity', url: '/cyber-security', color: '#9b86ff', desc: 'Protect systems and data through ethical hacking, penetration testing, and digital forensics.', rating: 4.2, tag: 'CSE' },
                    { id: 6, name: 'Azure Cloud Computing', url: '/azure-cloud', color: '#70e1ff', desc: 'Gain hands-on skills in Microsoft Azure, cloud deployment, DevOps, and virtualization.', rating: 4.1, tag: 'CSE' },
                    { id: 7, name: 'Augmented & Virtual Reality', url: '/augmented-virtual-reality', color: '#7bdcb5', desc: 'Design immersive 3D experiences using Unity, C#, and AR/VR tools for real-world applications.', rating: 3.8, tag: 'CSE' },
                    { id: 8, name: 'Android App Development', url: '/android-app', color: '#f78da7', desc: 'Develop native Android apps using Kotlin, Android Studio, and modern UI/UX practices.', rating: 3.9, tag: 'CSE' },

                    // ðŸ”¹ ECE
                    { id: 9, name: 'Embedded Systems', url: '/embedded-system', color: '#a0c4ff', desc: 'Explore microcontrollers, IoT hardware, and embedded C programming for real-time systems.', rating: 3.5, tag: 'ECE' },
                    { id: 10, name: 'Hybrid Electric Vehicle', url: '/hybrid-electric-vehicles', color: '#caffbf', desc: 'Learn EV design, hybrid powertrain systems, battery technology, and vehicle simulation.', rating: 4.8, tag: 'ECE' },
                    { id: 11, name: 'Internet of Things', url: '/iot', color: '#ffd6a5', desc: 'Connect devices using IoT sensors, cloud platforms, and automation frameworks.', rating: 4.2, tag: 'ECE' },
                    { id: 12, name: 'Robotics', url: '/robotics', color: '#bdb2ff', desc: 'Build and program robots using Arduino, ROS, and AI-driven automation technologies.', rating: 3.9, tag: 'ECE' },

                    // ðŸ”¹ Mechanical
                    { id: 13, name: 'Autocad', url: '/autocad', color: '#ffc6ff', desc: 'Design and draft engineering models using AutoCAD for mechanical and civil applications.', rating: 3.8, tag: 'Mechanical' },
                    { id: 14, name: 'IC Engine', url: '/ic-engine', color: '#fdffb6', desc: 'Understand internal combustion engines, thermodynamics, and automotive design systems.', rating: 3.7, tag: 'Mechanical' },
                    { id: 15, name: 'Car Design', url: '/car-design', color: '#bde0fe', desc: 'Learn automobile design principles, aerodynamics, and 3D modeling for automotive innovation.', rating: 3.5, tag: 'Mechanical' },

                    // ðŸ”¹ Management
                    { id: 16, name: 'Digital Marketing', url: '/digital-marketing', color: '#ffa6c1', desc: 'Master SEO, social media, Google Ads, and content marketing to grow brands online.', rating: 3.5, tag: 'Management' },
                    { id: 17, name: 'Human Resource', url: '/human-resource', color: '#6ea8fe', desc: 'Develop skills in recruitment, talent management, HR analytics, and employee relations.', rating: 4.7, tag: 'Management' },
                    { id: 18, name: 'Business Analytics', url: '/business-analytics', color: '#3ddc97', desc: 'Analyze business data using Excel, SQL, and Power BI to drive strategic decisions.', rating: 4.6, tag: 'Management' },
                    { id: 19, name: 'Stock Market', url: '/stock-market', color: '#ffd166', desc: 'Learn trading, technical analysis, and portfolio management for financial markets.', rating: 4.3, tag: 'Management' },
                    { id: 20, name: 'Marketing & Management', url: '/marketing-management', color: '#ff6b6b', desc: 'Explore branding, market research, and business strategy for leadership success.', rating: 4.5, tag: 'Management' },
                    { id: 21, name: 'Finance', url: '/finance', color: '#9b86ff', desc: 'Master financial modeling, accounting, budgeting, and investment management.', rating: 4.2, tag: 'Management' },

                    // ðŸ”¹ Biotechnology
                    { id: 22, name: 'Nano Technology', url: '/nano-technology', color: '#70e1ff', desc: 'Study nanomaterials, fabrication techniques, and their applications in science and medicine.', rating: 4.1, tag: 'Biotechnology' },
                    { id: 23, name: 'Genetic Engineering', url: '/genetic-engineering', color: '#7bdcb5', desc: 'Understand DNA technology, CRISPR, and genetic modification for biotech innovation.', rating: 3.8, tag: 'Biotechnology' },

                    // ðŸ”¹ Pharmacy
                    { id: 24, name: 'Medical Coding', url: '/medical-coding', color: '#f78da7', desc: 'Learn healthcare coding systems like ICD, CPT, and HCPCS to ensure accurate medical billing and documentation.', rating: 3.9, tag: 'Pharmacy' },
                    { id: 25, name: 'Pharmacovigilance', url: '/pharmacovigilance', color: '#a0c4ff', desc: 'Understand drug safety, adverse event reporting, and regulatory compliance in pharma.', rating: 3.5, tag: 'Pharmacy' },
                    { id: 26, name: 'Clinical SAS', url: '/clinical-sas', color: '#caffbf', desc: 'Use SAS for clinical data analysis, reporting, and pharmaceutical research compliance.', rating: 4.8, tag: 'Pharmacy' },
                ];


                const TAGS = ['All', 'CSE', 'ECE', 'Mechanical', 'Management', 'Biotechnology', 'Pharmacy'];

                // ======= State & Elements =======
                const grid = document.getElementById('grid');
                const searchInput = document.getElementById('searchInput');
                const sortSelect = document.getElementById('sortSelect');
                const chips = document.getElementById('chips');
                const pagination = document.getElementById('pagination');

                const state = {
                    q: '',
                    tag: 'All',
                    sort: 'popular',
                    page: 1,
                    perPage: 8,
                };

                // ======= Utilities =======
                const by = (k) => (a, b) => (a[k] > b[k]) ? 1 : (a[k] < b[k] ? -1 : 0);

                function filterData() {
                    let data = [...CATEGORIES];
                    if (state.tag !== 'All') data = data.filter(c => c.tag === state.tag);
                    if (state.q) {
                        const q = state.q.toLowerCase();
                        data = data.filter(c => c.name.toLowerCase().includes(q) || c.desc.toLowerCase().includes(q));
                    }
                    if (state.sort === 'name') data.sort(by('name'));
                    if (state.sort === 'rating') data.sort(by('rating')).reverse();
                    if (state.sort === 'popular') data.sort(by('rating')).reverse();
                    return data;
                }

                function paginate(data) {
                    const start = (state.page - 1) * state.perPage;
                    const end = start + state.perPage;
                    return { total: data.length, slice: data.slice(start, end) };
                }

                function renderChips() {
                    chips.innerHTML = TAGS.map(tag => `
        <button class="chip ${state.tag === tag ? 'active' : ''}" data-tag="${tag}" aria-pressed="${state.tag === tag}">${tag}</button>
      `).join('');
                }

                function cardTemplate(c) {
                    return `
    <a href="${c.url}" class="card" tabindex="0" aria-label="${c.name} category">
      <span class="badge">${c.rating} rating</span>
      <div class="iconwrap" style="background: radial-gradient(180px 100px at 0% 0%, rgba(255,255,255,.14), rgba(255,255,255,0)), linear-gradient(135deg, ${shade(c.color, -20)}, ${shade(c.color, -35)}); border-color: var(--border)">
        ${circleIcon(c.color)}
      </div>
      <h3>${c.name}</h3>
      <p>${c.desc}</p>
      <div class="meta"><span class="dot" style="background:${c.color}"></span><span>${c.tag}</span></div>
    </a>`;
                }


                function circleIcon(fill) {
                    return `<svg class="i20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><circle cx="12" cy="12" r="8" fill="${fill}"/></svg>`;
                }

                function shade(hex, percent) {
                    // simple hex shade util
                    const f = parseInt(hex.slice(1), 16), t = percent < 0 ? 0 : 255, p = Math.abs(percent) / 100;
                    const R = f >> 16, G = f >> 8 & 0x00FF, B = f & 0x0000FF;
                    const r = Math.round((t - R) * p) + R, g = Math.round((t - G) * p) + G, b = Math.round((t - B) * p) + B;
                    return `#${(0x1000000 + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;
                }

                function render() {
                    // chips
                    renderChips();

                    const data = filterData();
                    const { total, slice } = paginate(data);

                    // grid
                    grid.innerHTML = slice.map(cardTemplate).join('');

                    // pagination
                    const pages = Math.max(1, Math.ceil(total / state.perPage));
                    if (state.page > pages) state.page = pages; // clamp
                    pagination.innerHTML = `
        <button class="page-btn" data-page="prev" ${state.page === 1 ? 'disabled' : ''}>\u2039</button>
        ${Array.from({ length: pages }, (_, i) => i + 1).map(p => `
          <button class="page-btn ${state.page === p ? 'active' : ''}" data-page="${p}">${p}</button>
        `).join('')}
        <button class="page-btn" data-page="next" ${state.page === pages ? 'disabled' : ''}>\u203A</button>
      `;
                }

                // ======= Events =======
                searchInput.addEventListener('input', (e) => {
                    state.q = e.target.value.trim();
                    state.page = 1;
                    render();
                });

                sortSelect.addEventListener('change', (e) => {
                    state.sort = e.target.value;
                    state.page = 1;
                    render();
                });

                chips.addEventListener('click', (e) => {
                    const b = e.target.closest('.chip');
                    if (!b) return;
                    state.tag = b.dataset.tag;
                    state.page = 1;
                    render();
                });

                pagination.addEventListener('click', (e) => {
                    const b = e.target.closest('.page-btn');
                    if (!b) return;
                    const pages = Math.max(1, Math.ceil(filterData().length / state.perPage));
                    if (b.dataset.page === 'prev') state.page = Math.max(1, state.page - 1);
                    else if (b.dataset.page === 'next') state.page = Math.min(pages, state.page + 1);
                    else state.page = Number(b.dataset.page);
                    render();
                });



                // Initial render
                render();
            </script>
</body>

</html>